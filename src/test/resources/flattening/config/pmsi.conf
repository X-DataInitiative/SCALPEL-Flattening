default = {

  output_path = "src/test/resources/flattening/parquet_table/"

  schema_file_path = [
    "src/test/resources/flattening/schema/DCIR_schema.csv"
  ]

  tables_config = [
    {
      name = "IR_BEN_R"
      date_format = "dd/MM/yyyy"

      input_paths = [
        "src/test/resources/flattening/csv-table/IR_BEN_R.csv"
      ]
      output {
        key = "1"
        partion_column = "NUM_ENQ"
      }
    }
  ]

  join = [
    {
      name = "DCIR1"
      partitioningStartegy = ["year(","month"]

      main_table = {
        path = "src/test/resources/flattening/join/inputCentralTable"
        name = "ER_PRS_F"
        primaryKey = ["PatientID"]
      }

      tablesToJoin = [
        {
          name = "ER_PRS_F"
          path = "src/test/resources/Flattening/join/inputTableToJoin/1"
          foreignKeys = ["patient"]
        },
        {
          name = "ER_CAM_F"
          path = "src/test/resources/flattening/join/inputTableToJoin/2"
          foreignKeys = ["patient"]
        }
      ]

      outputPath = "src/test/resources/flattening/join/runResult"
    },
    {
      name = "DCIR2"
      partitioningStartegy = ["year","month"]

      main_table = {
        path = "src/test/resources/flattening/join/inputCentralTable"
        name = "ER_PRS_F"
        primaryKey = ["PatientID"]
      }

      tablesToJoin = [
        {
          name = "ER_PRS_F"
          path = "src/test/resources/Flattening/join/inputTableToJoin/1"
          foreignKeys = ["patient"]
        },
        {
          name = "ER_CAM_F"
          path = "src/test/resources/flattening/join/inputTableToJoin/2"
          foreignKeys = ["patient"]
        }
      ]
      outputPath = "src/test/resources/flattening/join/runResult2"
    }

  ]
}

test = ${default}